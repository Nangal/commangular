<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Commangular</title><meta name=description content=""><meta name=viewport content="width=device-width, initial-scale=1"><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel=stylesheet type=text/css><!-- Place favicon.ico and apple-touch-icon(s) in the root directory --><link rel=stylesheet href=/css/d41d.main2.css><script src=/js/d41d.head-scripts.js></script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><nav class="navbar navbar-default navbar-inverse header" role=navigation><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=#>Commangular</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=/><i class="fa fa-home"></i>Home</a></li><li class=active><a href=/why><i class="fa fa-question"></i>Where and Why?</a></li><li><a href=/get-started><i class="fa fa-gears"></i>Get Started</a></li><li><a href=/docs><i class="fa fa-book"></i>Documentation</a></li></ul></div></nav><div class=subheader><div class="container text-center"><h1><i class="fa fa-question"></i>Where and Why</h1><h3>WHERE COMMANGULAR FITS AND WHY</h3></div></div><div class=social-bar><div class="container text-center"><ul class=list-inline><li><iframe src="http://ghbtns.com/github-btn.html?user=yukatan&repo=commangular&type=watch&count=true" allowtransparency=true frameborder=0 scrolling=0 width=82 height=20></iframe></li><li><iframe src="http://ghbtns.com/github-btn.html?user=yukatan&repo=commangular&type=fork&count=true" allowtransparency=true frameborder=0 scrolling=0 width=80 height=20></iframe></li><li><iframe src="http://ghbtns.com/github-btn.html?user=yukatan&repo=commangular&type=follow&count=true" allowtransparency=true frameborder=0 scrolling=0 width=140 height=20></iframe></li></ul></div></div><div class="container markdown-content"><h2>AngularJS and MVW</h2><hr><p>AngularJS is declared as a MVW framework. MVW is Model-View-Whatever, &quot;Whatever fits to you&quot;. Commangular lives in the whatever side. I define Commangular as a unified controller for AngularJS that aims to totally separate view layer and infrastructure layer in an AngularJS application.</p><p><br><em>You can see in the image below where commangular fits.</em><br><br><div class="mvc-image text-center"><img src=/img/b2d5.mvc.png></div><a class=mvc-image-link href=/img/b2d5.mvc.png>Click to see the image</a></p><ul><li><p><strong>View layer:</strong> The view layer is composed by HTML and the presentation model. The presentation model is a concept that is going to be explained below. There is no business logic here, just event dispatching. The angular controller is injected with the model and then the model is exposed to the scope.</p></li><li><p><strong>Model layer:</strong> The model is the data and the state of your application. It has methods to manipulate that data as well. it acts as a glue between the view and the infrastructure layer usually through data binding.</p></li><li><p><strong>Infrastructure Layer:</strong> It is composed by commands managed by commangular and regular angular services. As you can see in the above image, services don&#39;t have any dependency with the model and they should have just one responsability. Commands could be injected with model and services and each command resolve just one specific operation, so one responsability as well. Is in commands where the model is updated with service results.</p></li></ul><p>Of course, this is not the only option you have to architect an angularJs application, is just one option that gives you powerfull things like interception, operation chaining and other planned concepts like commangular-spoof for backendless development and rapid prototyping.</p><h2>Scope + Controller == Presentation Model.</h2><hr><p>In AngularJS the controller is tightly coupled to the view. A view change can produce easily a full controller rewrite, so the best way to follow seems to have the less possible code on controllers.The controller is a function that decorate the scope, so the combination of scope and controller seems to be a presentation model. I don&#39;t feel confortable injecting services on controller in angular as I do in Java for example.. of course this is just my opinion. That&#39;s why I develop Commangular. I have been a Flex developer for years and I want apply some patterns I learnt to AngularJS.</p><h2>Code organization by example.</h2><hr><p>This is an example showing a simple &quot;add item to cart&quot; of a shopping cart application. Showing the different layer separation and using commangular.</p><p><em>View Layer</em></p><div class=highlight><pre><code class="html language-html" data-lang=html><span class=nt>&lt;div</span> <span class=na>ng-controller=</span><span class=s>&quot;CartController&quot;</span><span class=nt>&gt;</span>
    <span class=c>&lt;!-- Some other content here--&gt;</span>
    <span class=nt>&lt;button</span> <span class=na>ng-click=</span><span class=s>&quot;dispatch(&#39;AddItemToCartEvent&#39;)&quot;</span><span class=nt>&gt;</span>Add item to the cart<span class=nt>&lt;/button&gt;</span>
<span class=nt>&lt;/div&gt;</span>
<span class=nt>&lt;div</span> <span class=na>id=</span><span class=s>&quot;item-list&quot;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;ul&gt;&lt;li</span> <span class=na>ng-repeat=</span><span class=s>&quot;item in itemList&quot;</span><span class=nt>&gt;&lt;/li&gt;&lt;/ul&gt;</span>
<span class=nt>&lt;/div&gt;</span>
</code></pre></div><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=nx>angular</span><span class=p>.</span><span class=nx>module</span><span class=p>(</span><span class=s1>&#39;CartShopping&#39;</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>controller</span><span class=p>(</span><span class=s1>&#39;CartController&#39;</span><span class=p>,</span><span class=kd>function</span><span class=p>(</span><span class=nx>$scope</span><span class=p>,</span><span class=nx>CartItemsList</span><span class=p>)</span> <span class=p>{</span>

        <span class=c1>//As you can see the code in controller is really small</span>
        <span class=nx>$scope</span><span class=p>.</span><span class=nx>itemList</span> <span class=o>=</span> <span class=nx>CartItemsList</span><span class=p>.</span><span class=nx>list</span><span class=p>;</span>
    <span class=p>});</span>
</code></pre></div><p><em>Model Layer</em></p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=nx>angular</span><span class=p>.</span><span class=nx>module</span><span class=p>(</span><span class=s1>&#39;CartShopping&#39;</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>service</span><span class=p>(</span><span class=s1>&#39;CartItemsList&#39;</span><span class=p>,</span><span class=kd>function</span><span class=p>(){</span>

        <span class=c1>//Items in the user cart</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>list</span> <span class=o>=</span> <span class=p>[];</span>

        <span class=c1>//add an item to the cart</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>addItem</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>

            <span class=k>this</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>item</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>});</span>

<span class=nx>angular</span><span class=p>.</span><span class=nx>module</span><span class=p>(</span><span class=s1>&#39;CartShopping&#39;</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>service</span><span class=p>(</span><span class=s1>&#39;CurrentSelectedItem&#39;</span><span class=p>,</span><span class=kd>function</span><span class=p>(){</span>

        <span class=k>this</span><span class=p>.</span><span class=nx>item</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span> <span class=c1>// this item keep the current item that the user is viewing</span>
    <span class=p>});</span> 
</code></pre></div><p><em>Infrastructure Layer</em></p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=nx>commangular</span><span class=p>.</span><span class=nx>command</span><span class=p>(</span><span class=s1>&#39;AddItemToCartCommand&#39;</span><span class=p>,</span><span class=kd>function</span><span class=p>(</span><span class=nx>CartItemList</span><span class=p>,</span><span class=nx>CurrentSelectedItem</span><span class=p>,</span><span class=nx>CartService</span><span class=p>)</span> <span class=p>{</span>

    <span class=k>return</span> <span class=p>{</span>

        <span class=nx>execute</span> <span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>

            <span class=c1>//This is returning a promise.</span>
            <span class=k>return</span> <span class=nx>CartService</span><span class=p>.</span><span class=nx>addItem</span><span class=p>(</span><span class=nx>CurrentSelectedItem</span><span class=p>.</span><span class=nx>item</span><span class=p>);</span> <span class=c1>//We suposse the server knows where to add the item for simplicity;</span>
        <span class=p>}</span>
        <span class=nx>onResult</span> <span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>

            <span class=c1>//We update the model to show it in the user list.  </span>
            <span class=nx>CartItemList</span><span class=p>.</span><span class=nx>addItem</span><span class=p>(</span><span class=nx>CurrentSelectedItem</span><span class=p>.</span><span class=nx>item</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>});</span>

<span class=nx>angular</span><span class=p>.</span><span class=nx>module</span><span class=p>(</span><span class=s1>&#39;CartShopping&#39;</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>service</span><span class=p>(</span><span class=s1>&#39;CartItemsList&#39;</span><span class=p>,</span><span class=kd>function</span><span class=p>(</span><span class=nx>$http</span><span class=p>){</span>

        <span class=k>this</span><span class=p>.</span><span class=nx>addItem</span><span class=p>()</span>  <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>

            <span class=k>return</span> <span class=nx>$http</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=s1>&#39;some rest api url&#39;</span><span class=p>,</span><span class=nx>item</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>});</span>

<span class=c1>//We configure the commangular provider in a config block</span>

<span class=nx>$commangularProvider</span><span class=p>.</span><span class=nx>mapTo</span><span class=p>(</span><span class=s1>&#39;AddItemToCartEvent&#39;</span><span class=p>).</span><span class=nx>asSequence</span><span class=p>().</span><span class=nx>add</span><span class=p>(</span><span class=nx>AddItemToCartCommand</span><span class=p>);</span>    
</code></pre></div><p>Ok, you can think that this is a lot of code for a really simple thing.... yes it is. You can event inject $http in the controller directly and then expose the result to the scope, so you don&#39;t need a service,command or model, but when the application starts to grow, you will begin to cry.</p></div><div class=footer><div class="footer-data text-center"><div>Commangular 0.5.2 | Created by <a href=https://twitter.com/FlashMandril target=_blank>Jesús Barquín.</a></div><div>Code licensed under <a href=http://opensource.org/licenses/mit-license.html target=_blank>MIT License.</a> Documentation licensed under <a href=http://creativecommons.org/licenses/by/3.0/>CC 3.0</a></div><div>This website is using <a href=http://fontawesome.io/ target=_blank>Font Awesome</a>, <a href=http://getbootstrap.com/ target=_blank>Twitter Bootstrap</a> and <a href=http://jekyllrb.com/ target=_blank>Jekyll</a></div><div><a href=https://github.com/yukatan/commangular target=_blank>Github Repository</a></div></div></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/commangular//_bower_components/jquery/jquery.js"><\/script>')</script><script src=/js/d41d.script.js></script><script type=text/javascript>var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-46287627-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();</script></body></html>